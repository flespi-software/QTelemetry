(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("2f39")},"2f39":function(e,t,n){"use strict";n.r(t);var r=n("967e"),a=n.n(r),o=(n("a481"),n("96cf"),n("1194"),n("7d6e"),n("e54f"),n("62f2"),n("7e6d"),n("2b0e")),c=n("b05d"),s=n("4d5a"),i=n("e359"),u=n("9404"),f=n("09e3"),l=n("9989"),p=n("65c6"),d=n("6ac5"),v=n("9c40"),h=n("0016"),w=n("1c1c"),b=n("66e5"),k=n("4074"),g=n("0170"),m=n("cf57"),x=n("ddd8"),Q=n("27f9"),S=n("9564"),C=n("8f8e"),I=n("3b73"),y=n("05c0"),D=n("4e73"),T=n("b047"),q=n("714f"),O=n("f508"),F=n("a639"),N=n("18d6"),E=n("436b"),L=n("2a19");o["default"].use(c["a"],{config:{},components:{QLayout:s["a"],QHeader:i["a"],QDrawer:u["a"],QPageContainer:f["a"],QPage:l["a"],QToolbar:p["a"],QToolbarTitle:d["a"],QBtn:v["a"],QIcon:h["a"],QList:w["a"],QItem:b["a"],QItemSection:k["a"],QItemLabel:g["a"],QSpinnerGears:m["a"],QSelect:x["a"],QInput:Q["a"],QToggle:S["a"],QCheckbox:C["a"],QExpansionItem:I["a"],QTooltip:y["a"],QMenu:D["a"],QChip:T["a"]},directives:{Ripple:q["a"]},plugins:{Loading:O["a"],SessionStorage:F["a"],LocalStorage:N["a"],Dialog:E["a"],Notify:L["a"]}});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},J=[],$={name:"App"},P=$,_=n("2877"),j=Object(_["a"])(P,V,J,!1,null,null,null),B=j.exports,M=n("2f62"),z=(n("4917"),n("6b54"),n("06db"),n("8993")),A=n.n(z);function G(e){0}function H(e,t){"object"===A()(t)?(t=JSON.parse(t.toString()),o["default"].set(e.devices,t.id,t)):o["default"].delete(e.devices,t)}function R(e,t){if(t.response&&t.response.status)switch(t.response.status){case 0:Y(e,!0),X(e),o["default"].set(e,"token","");break;case 401:U(e);break;default:t.response.data&&t.response.data.errors&&t.response.data.errors.length&&t.response.data.errors.forEach((function(t){Z(e,t.reason)}))}else if(t.code&&t.message)switch(t.code){case 2:e.token&&U(e),Z(e,t.message);break}else Z(e,t.message)}function K(e,t){var n=t.replace("FlespiToken ","");te(e,!0),t&&n.match(/^[a-z0-9]+$/i)?(o["default"].connector.token="FlespiToken ".concat(n),o["default"].connector.socket.on("connect",(function(){o["default"].set(e,"token",n)})),F["a"].set("currentToken",n)):(n="",o["default"].connector.token="",U(e)),e.errors.length&&(e.errors=[],e.newNotificationCounter=0)}function U(e){F["a"].remove("currentToken"),o["default"].connector.token="",e.socketOffline&&te(e,!1),o["default"].set(e,"token","")}function W(e){e.hasDevicesInit=!0}function X(e){e.hasDevicesInit=!1,o["default"].set(e,"devices",[])}function Y(e,t){o["default"].set(e,"offline",t)}function Z(e,t){L["a"].create({type:"negative",icon:"warning",message:"".concat(t),timeout:1e3}),e.newNotificationCounter++,e.errors.push(t)}function ee(e){o["default"].set(e,"errors",[])}function te(e,t){o["default"].set(e,"socketOffline",t)}function ne(e){e.newNotificationCounter=0}var re={reqStart:G,reqSuccessful:H,reqFailed:R,setToken:K,clearToken:U,setDevicesInit:W,unsetDevicesInit:X,setOfflineFlag:Y,addError:Z,clearErrors:ee,setSocketOffline:te,clearNotificationCounter:ne};n("28a5");function ae(e,t){var n,r,c;return a.a.async((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,r("reqStart"),t.prev=2,!n.token){t.next=9;break}return t.next=6,a.a.awrap(o["default"].connector.socket.subscribe({name:"flespi/state/gw/devices/+",handler:function(e,t,n){r("reqSuccessful",e.length?e:t.split("/").reverse()[0])}}));case 6:return c=t.sent,n.hasDevicesInit||r("setDevicesInit"),t.abrupt("return",(function(){return a.a.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(o["default"].connector.poolDevicesStop(c));case 2:case"end":return e.stop()}}))}));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),r("reqFailed",t.t0);case 14:case"end":return t.stop()}}),null,null,[[2,11]])}function oe(e){var t,n,r;return a.a.async((function(c){while(1)switch(c.prev=c.next){case 0:return t=e.state,n=e.commit,c.prev=1,c.next=4,a.a.awrap(o["default"].connector.http.external.get("./statics/icons/favicon-16x16.png?_=".concat((new Date).getTime())));case 4:r=c.sent,200===r.status&&t.offline&&n("setOfflineFlag",!1),c.next=12;break;case 8:c.prev=8,c.t0=c["catch"](1),t.offline||n("setOfflineFlag",!0);case 12:case"end":return c.stop()}}),null,null,[[1,8]])}var ce={getDevices:ae,checkConnection:oe};o["default"].use(M["a"]);var se={token:"",devices:{},hasDevicesInit:!1,offline:!1,newNotificationCounter:0,errors:[],socketOffline:!1},ie=new M["a"].Store({state:se,mutations:re,actions:ce}),ue=n("8c4f"),fe=[{path:"/",component:function(){return n.e("70840bc9").then(n.bind(null,"f241"))},children:[{path:"",component:function(){return n.e("461a5054").then(n.bind(null,"8b24"))}}]}];fe.push({path:"*",component:function(){return n.e("4b47640d").then(n.bind(null,"e51e"))}});var le=fe;o["default"].use(ue["a"]);var pe=function(){var e=new ue["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:le,mode:"hash",base:""});return e},de=function(){var e="function"===typeof ie?ie({Vue:o["default"]}):ie,t="function"===typeof pe?pe({Vue:o["default"],store:e}):pe;e.$router=t;var n={el:"#q-app",router:t,store:e,render:function(e){return e(B)}};return{app:n,store:e,router:t}},ve=n("553c"),he=n.n(ve),we=n("9224"),be={socketConfig:{clientId:"telemetry-viewer-".concat(we["a"],"-").concat(Math.random().toString(16).substr(2,8)),mqttSettings:{protocolVersion:5}}};var ke=function(e){var t=e.Vue,n=e.store;t.prototype.$flespiServer=be.httpConfig&&be.httpConfig.server?"".concat(be.httpConfig.server,":").concat(be.httpConfig.port):"https://flespi.io",t.use(he.a,be),t.connector.socket.on("error",(function(e){n.commit("reqFailed",e)})),window&&window.addEventListener("beforeunload",(function(){t.connector.socket.close(!0)}))},ge=de(),me=ge.app,xe=ge.store,Qe=ge.router;function Se(){var e,t,n,r,c;return a.a.async((function(s){while(1)switch(s.prev=s.next){case 0:e=!0,t=function(t){e=!1,window.location.href=t},n=window.location.href.replace(window.location.origin,""),r=[ke],c=0;case 5:if(!(!0===e&&c<r.length)){s.next=23;break}if("function"===typeof r[c]){s.next=8;break}return s.abrupt("continue",20);case 8:return s.prev=8,s.next=11,a.a.awrap(r[c]({app:me,router:Qe,store:xe,Vue:o["default"],ssrContext:null,redirect:t,urlPath:n}));case 11:s.next=20;break;case 13:if(s.prev=13,s.t0=s["catch"](8),!s.t0||!s.t0.url){s.next=18;break}return window.location.href=s.t0.url,s.abrupt("return");case 18:return console.error("[Quasar] boot error:",s.t0),s.abrupt("return");case 20:c++,s.next=5;break;case 23:if(!1!==e){s.next=25;break}return s.abrupt("return");case 25:new o["default"](me);case 26:case"end":return s.stop()}}),null,null,[[8,13]])}Se()},"7e6d":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"a":"0.2.1"}')}},[[0,"runtime","vendor"]]]);